<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Tuto - CrÃ©ation d'une application CLI avec NodeJS - MattÃ¨o.dev</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="title" content="MattÃ¨o Gauthier personal website - MattÃ¨o.dev"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" property="og:type" content="website"><meta data-n-head="ssr" property="og:url" content="https://xn--matto-7ra.dev/"><meta data-n-head="ssr" property="og:title" content="MattÃ¨o Gauthier personal website"><meta data-n-head="ssr" property="og:description" content="Novice web developer, learning, writing, open-sourcer. Working with web technologies like Vue, React. Find out some blog-posts, tutorials, etc.."><meta data-n-head="ssr" property="og:image" content="https://cdn.jsdelivr.net/gh/MattixNow/StaticHost@master/assets/og.png"><meta data-n-head="ssr" property="twitter:image" content="https://cdn.jsdelivr.net/gh/MattixNow/StaticHost@master/assets/og-twitter.png"><meta data-n-head="ssr" property="twitter:card" content="summary"><meta data-n-head="ssr" property="twitter:title" content="MattÃ¨o Gauthier personal website"><meta data-n-head="ssr" property="twitter:url" content="https://xn--matto-7ra.dev/"><meta data-n-head="ssr" property="twitter:description" content="Novice web developer, learning, writing, open-sourcer. Working with web technologies like Vue, React. Find out some blog-posts, tutorials, etc.."><meta data-n-head="ssr" name="keywords" content="MattÃ¨o Gauthier, MattÃ¨o, semoule.fr, semoule, mattaio-website, personal website, Javascript, French, FranÃ§ais, NodeJS, blog, mattÃ¨o.dev"><meta data-n-head="ssr" name="msapplication-TileColor" content="#2b5797"><meta data-n-head="ssr" name="theme-color" content="#fff"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="Mattaio-Website"><meta data-n-head="ssr" data-hid="author" name="author" content="MattÃ¨o Gauthier"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="Mattaio-Website"><meta data-n-head="ssr" data-hid="description" name="description" content="Simple approche des applications cli avec nodejs"><meta data-n-head="ssr" name="keywords" content="node,nodejs,cli,app,yargs"><link data-n-head="ssr" rel="stylesheet preconnect" href="https://cdn.jsdelivr.net/gh/MattixNow/StaticHost@latest/fonts/Jost/Jost.css" type="text/css" charset="utf-8"><link data-n-head="ssr" rel="manifest" href="/mattaio-website/_nuxt/manifest.ba9e728a.json"><script data-n-head="ssr" rel="preconnect" type="text/javascript" src="https://unpkg.com/bulma-modal-fx/dist/js/modal-fx.min.js"></script><script data-n-head="ssr" rel="preconnect" type="text/javascript" src="https://unpkg.com/scrollreveal"></script><base href="/mattaio-website/"><link rel="preload" href="/mattaio-website/_nuxt/0a8bdd07b09a027a2b22.js" as="script"><link rel="preload" href="/mattaio-website/_nuxt/79b6ae31d4a6badc9636.js" as="script"><link rel="preload" href="/mattaio-website/_nuxt/27919725d3b1ff9b3d51.css" as="style"><link rel="preload" href="/mattaio-website/_nuxt/0ffaf7a34307cf057f4f.js" as="script"><link rel="preload" href="/mattaio-website/_nuxt/1386f4d472fc0c3168b7.css" as="style"><link rel="preload" href="/mattaio-website/_nuxt/08a7e0d52047aed56052.js" as="script"><link rel="preload" href="/mattaio-website/_nuxt/0c9bf40304dc16ac6430.css" as="style"><link rel="preload" href="/mattaio-website/_nuxt/22dc228677282aed575d.js" as="script"><link rel="stylesheet" href="/mattaio-website/_nuxt/27919725d3b1ff9b3d51.css"><link rel="stylesheet" href="/mattaio-website/_nuxt/1386f4d472fc0c3168b7.css"><link rel="stylesheet" href="/mattaio-website/_nuxt/0c9bf40304dc16ac6430.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="page-container"><div data-v-b4ff0000><nav role="navigation" aria-label="main navigation" class="navbar" data-v-b4ff0000><div class="navbar-brand" data-v-b4ff0000><a href="/mattaio-website/" class="navbar-item nuxt-link-active" data-v-b4ff0000><h1 class="title logo-text" data-v-b4ff0000>MattÃ¨o Gauthier</h1></a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample" class="navbar-burger burger" data-v-b4ff0000><span aria-hidden="true" data-v-b4ff0000></span> <span aria-hidden="true" data-v-b4ff0000></span> <span aria-hidden="true" data-v-b4ff0000></span></a></div> <div id="navbarBasicExample" class="navbar-menu" data-v-b4ff0000><div class="navbar-start" data-v-b4ff0000><a href="/mattaio-website/blog" class="navbar-item nuxt-link-active" data-v-b4ff0000>Mes posts</a> <a href="/mattaio-website/about" class="navbar-item" data-v-b4ff0000>About</a> <a href="/mattaio-website/contact" class="navbar-item" data-v-b4ff0000>Contact</a></div> <div class="navbar-end" data-v-b4ff0000><div class="navbar-item" data-v-b4ff0000><div class="buttons" data-v-b4ff0000><a class="button is-light soonPop" data-v-b4ff0000>Feedback</a> <a href="mailto:hello@mattÃ¨o.dev" class="button is-light" data-v-b4ff0000><strong data-v-b4ff0000>Email me ğŸ˜‰</strong></a></div></div></div></div></nav></div> <div data-v-4dcdf3e2><section class="hero is-light has-text-centered" data-v-4dcdf3e2><div class="hero-body" data-v-4dcdf3e2><div class="container landing" data-v-4dcdf3e2><h1 class="title" data-v-4dcdf3e2>Tuto - CrÃ©ation d'une application CLI avec NodeJS</h1> <div class="subtitle" data-v-4dcdf3e2>
          Published on
          <time data-v-4dcdf3e2>31st Jul 2019</time> 
          by MattÃ¨o Gauthier
        </div></div></div></section> <section class="section" data-v-4dcdf3e2><div class="container" data-v-4dcdf3e2><div data-v-4dcdf3e2><article data-v-4dcdf3e2><div class="blog-content content" data-v-4dcdf3e2><h1>Tuto - CrÃ©ation dâ€™une application CLI avec NodeJS</h1>
<p>Pendant mon stage Ã  TBWA\Paris jâ€™ai eu du temps pour commencer le dÃ©veloppement dâ€™une suite dâ€™application cli (command line app), lors de cette review je vais me concentrer sur la premiÃ¨re application de cette suite. Jâ€™ai crÃ©Ã©r une simple application qui affiche les donnÃ©es publiques dâ€™un utilisateur Github. Voyons son fonctionnement :</p>
<pre><code>						â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
						â”‚                      â”‚
						â”‚   Github User Info   â”‚
						â”‚                      â”‚
						â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

? What's your Github username? Â» [ur username]

				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„   &lt;---- Profile Picture
				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
				â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„

     Username: tj
         Name: TJ Holowaychuk
   Identifier: 25254
  Repos count: 275
 Social Stats: TJ Holowaychuk follow 46 users and 40506 follow him
     Location: London, UK
      Weather: 16.67Â°C in London, UK

  Direct Link to this github profile https://github.com/tj
</code></pre>
<p><strong>Passons maintenant Ã  la crÃ©ation dâ€™un simple utilitaire qui rÃ©cupÃ¨re des emojis de lâ€™api Github</strong></p>
<h2>1. Quelles sont les donnÃ©es dont nous avons besoin ?</h2>
<p>Pour crÃ©er une application il vous faut du contenu, dans lâ€™application que nous allons crÃ©er nous aurons besoin de donnÃ©es en provenance du service de gestion de dÃ©pÃ´ts Github, pour nous faciliter la tÃ¢che les applications web comme Github peuvent disposer dâ€™une API ouverte (Interface de Programmation). Nous allons donc nous documenter Ã  propos de celle-ci.</p>
<p>Github dispose de plusieurs types dâ€™API Ã  savoir : une API REST et une API GraphQL; ces apis ont une approche diffÃ©rente de la donnÃ©e distante, pour faciliter la tÃ¢che nous allons utiliser lâ€™api REST qui sert de standard Ã  la plupart des APIs modernes.</p>
<p>La documentation nous indique la baseUrl <a href="https://api.github.com/"><code>https://api.github.com</code></a> câ€™est par cette url que toutes les requests vers lâ€™api seront envoyÃ©es. Lâ€™application qui va rÃ©pondre Ã  nos requÃªtes a Ã©tÃ© dÃ©veloppÃ©e selon des normes dâ€™accessibilitÃ©, il vous sera donc plus simple de tester des endpoints (les endpoints sont un ou plusieurs objets dâ€™une collection de donnÃ©es), lorsque votre requÃªte sera erronÃ© lâ€™api rÃ©pondra une erreur avec un code de statuts, câ€™est le protocole HTTP qui permet les rÃ©ponses avec statuts. Les donnÃ©es dont nous avons besoin sont donc facilement accessibles (nous verrons plus tard les cas dâ€™authentification).</p>
<h2>2. CrÃ©ations de lâ€™application</h2>
<p>Lâ€™utilisateur de lâ€™application doit pouvoir donner un ou plusieurs mots clÃ©s pour permettre Ã  lâ€™application de rechercher lâ€™emoji en question.</p>
<p>Pour dÃ©buter une application NodeJS, nous avons besoin du gestionnaire de package npm, npm va rendre utilisable notre application. Pour utiliser npm vous aurez besoin de NodeJS ğŸ¤ª, si npm nâ€™est pas installÃ© vous pouvez <a href="http://nodejs.org/downloads">mettre Ã  jour</a> NodeJS ou lâ€™installer avec apt si vous Ãªtes sur linux <code>sudo apt install npm</code></p>
<p>Maintenant que NodeJS et NPM sont bien installÃ©s nous allons crÃ©er un package avec la commande :</p>
<pre><code>npm init

package name: my-app
version: (1.0.0)
description:
entry point: (cli.js)
test command:
git repository:
keywords:
author:
license: (ISC)
</code></pre>
<p>A lâ€™aide de la lib yargs nous allons rÃ©cupÃ©rer les arguments Ã©mis par lâ€™utilisateur. Pour lâ€™installer il vous suffit de taper dans votre terminal :</p>
<pre><code>npm i yargs
</code></pre>
<p>Maintenant Ã©ditons le cÅ“ur de notre application, crÃ©ez le fichier <strong>cli.js</strong>. Nous allons intÃ©grer <strong>yargs</strong> que nous venons dâ€™installer.</p>
<pre><code>const argv = require("yargs")
</code></pre>
<p><strong>Yargs</strong> permet de dÃ©finir des options Ã  lâ€™application, son utilisation est trÃ¨s simple, il suffit dâ€™ajouter mÃ©thode Ã  la fonction require â¤µï¸</p>
<pre><code>const argv = require("yargs")
    .usage("Usage: $0 -e [eg. alien]")  // Ici nous dÃ©finissons l'usage de la commande pour l'utilisateur
    .alias("e", "emoji") // Ici nous mettons en relation deux options qui auront le mÃªme effet
    .describe("e", "Get an emoji") // Ici nous dÃ©crivons l'option "e" pour l'utilisateur
    .help("h") // Help est une mÃ©thode native Ã  la librarie, cela affiche une explication de l'utilisation de l'app
    .alias("h", "help") // Encore un alias
    .epilog("MattÃ¨o Gauthier - semoule.fr 2019").argv // Puis un texte Ã  afficher en fin d'exÃ©cution de la commande help
																											// On remarque aussi la mÃ©thode .argv qui termine
</code></pre>
<p>Nous pouvons dÃ¨s Ã  prÃ©sent tester le fonctionnement en ajoutant un console.log</p>
<pre><code>...
console.log(argv.e)
</code></pre>
<p>Normalement si tout fonctionne Ã  lâ€™exÃ©cution la sortie devrait ressembler Ã  Ã§a :</p>
<pre><code>$ node cli.js -e hey
hey

$ node cli.js
undefined
</code></pre>
<hr>
<p>Maintenant que <strong>yargs</strong> est fonctionnelle passons Ã  la rÃ©cupÃ©ration des donnÃ©es de lâ€™api Github, nous allons effectuer une requÃªte HTTP, pour cela nous allons utilisÃ© la librairie <strong>axios</strong> (il existe de nombreuses librairies http nodejs mais axios reste la plus connues, got est aussi une trÃ¨s bonne librairie)</p>
<pre><code>npm i axios
</code></pre>
<p>Maintenant que nous avons les librairies requises â¤µï¸</p>
<pre><code>// DÃ©finition des modules requis
const argv = require("yargs")
    .usage("Usage: $0 -e [eg. alien]")
    .alias("e", "emoji")
    .describe("e", "Get an emoji")
    .help("h")
    .alias("h", "help")
    .epilog("MattÃ¨o Gauthier - semoule.fr 2019").argv
const axios = require("axios")

const choice = argv.e // DÃ©finition de la variable qui intÃ©gre le choix de l'use
console.log("You chose " + choice + " emoji") // Message de rappel du choix (debug)

axios.get(`https://api.github.com/emojis`) // RequÃªte GET Ã  l'aide de la fonction axios.get()
  .then((response) => { // Lorsque la promise est rÃ©solu (rÃ©ponse de l'api)
    let res = response.data // Assignation de la variable
    console.log(res[choice]); // Affichage de l'url de l'emoji demandÃ©
  })
</code></pre>
<p>VoilÃ  le fonctionnement de notre mini application, vous pouvez bien Ã©videmment lâ€™amÃ©liorer pour quâ€™elle puisse par exemple enregistrer dans lâ€™image dans un dossier ou que lâ€™emoji en question soit copiÃ© dans le presse papier.</p>
<p>Application en fonctionnement â¤µï¸</p>
<pre><code>$ node cli.js -e smile
You chose smile emoji
https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8
</code></pre>
<p>Câ€™est bien beau tout cela mais notre application ne dispose pas de commande Ã  portÃ©e gÃ©nÃ©rale, il serait plus pratique dâ€™utiliser une commande telle que :</p>
<pre><code>touch index.html // Commande Unix qui crÃ©er un ou plusieurs fichier
</code></pre>
<p>Pour lier notre application Ã  un alias utilisable globalement nous avons dâ€™abord besoin de configurer le fichier <code>package.json</code> â¤µï¸</p>
<pre><code>{
  "name": "emoji-app",
  "version": "1.0.0",
  "description": "Hello WORLD",
  "main": "cli.js", // Ici le main doit correspondre avec le bin â¤µï¸
  "bin": {
    "emoji-app": "cli.js" // Ici on dÃ©fini l'exÃ©cutable
  },
  "scripts": {
    "start": "node cli.js"
  },
  "engines": {
    "node": ">=8" // Ici on s'assure que l'utilisateur Ã  une version suffisante (facultatif)
  },
  "files": [
    "cli.js" // Ici on ajoute les fichiers requis Ã  l'exÃ©cution
  ],
  "keywords": [],
  "author": "MattÃ¨o Gauthier",
  "license": "MIT",
  "dependencies": {
    "axios": "^0.19.0",
    "yargs": "^13.3.0"
  }
}
</code></pre>
<p>Puis le fichier <code>cli.js</code></p>
<pre><code>#!/usr/bin/env node // On ajoute un shebang pour que le systÃ¨me exÃ©cute avec node
</code></pre>
<p><strong>Maintenant votre application est disponible dans votre terminal avec la commande <code>emoji-app</code> !</strong></p>
<blockquote>
<p>Merci dâ€™avoir lu ce bref tutoriel nâ€™hÃ©sitez pas Ã  partager vos programmes et Ã  me donner votre avis sur ce post</p>
</blockquote>
</div></article></div></div></section></div> <footer class="footer is-size-7-mobile"><div class="is-pulled-left"><p><a href="https://MattÃ¨o.dev" class="linkn"><strong>MattÃ¨o.dev</strong></a> 2017 â†’ 2020 by
      <a href="https://t.me/MatteoGauthier">MattÃ¨o Gauthier</a></p></div> <div class="is-pulled-right has-text-right"><nav class="buttons"><span><a href="https://github.com/MattixNow" class="linkn"><i class="fab fa-github"></i> <span class="which-social">Github</span></a></span> <span><a href="https://twitter.com/MattixNow" class="linkn"><i class="fab fa-twitter"></i> <span class="which-social">Twitter</span></a></span></nav></div></footer></div></div></div><script>window.__NUXT__=function(e,t,o,n,i,s){return{layout:"default",data:[{attributes:{title:o,published:e,description:n,tags:i,ctime:new Date(15645312e5),author:t,filename:s},landingImg:"",content:"<h1>Tuto - CrÃ©ation dâ€™une application CLI avec NodeJS</h1>\n<p>Pendant mon stage Ã  TBWA\\Paris jâ€™ai eu du temps pour commencer le dÃ©veloppement dâ€™une suite dâ€™application cli (command line app), lors de cette review je vais me concentrer sur la premiÃ¨re application de cette suite. Jâ€™ai crÃ©Ã©r une simple application qui affiche les donnÃ©es publiques dâ€™un utilisateur Github. Voyons son fonctionnement :</p>\n<pre><code>\t\t\t\t\t\tâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\n\t\t\t\t\t\tâ”‚                      â”‚\n\t\t\t\t\t\tâ”‚   Github User Info   â”‚\n\t\t\t\t\t\tâ”‚                      â”‚\n\t\t\t\t\t\tâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n\n? What's your Github username? Â» [ur username]\n\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„   &lt;---- Profile Picture\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„\n\t\t\t\tâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„\n\n     Username: tj\n         Name: TJ Holowaychuk\n   Identifier: 25254\n  Repos count: 275\n Social Stats: TJ Holowaychuk follow 46 users and 40506 follow him\n     Location: London, UK\n      Weather: 16.67Â°C in London, UK\n\n  Direct Link to this github profile https://github.com/tj\n</code></pre>\n<p><strong>Passons maintenant Ã  la crÃ©ation dâ€™un simple utilitaire qui rÃ©cupÃ¨re des emojis de lâ€™api Github</strong></p>\n<h2>1. Quelles sont les donnÃ©es dont nous avons besoin ?</h2>\n<p>Pour crÃ©er une application il vous faut du contenu, dans lâ€™application que nous allons crÃ©er nous aurons besoin de donnÃ©es en provenance du service de gestion de dÃ©pÃ´ts Github, pour nous faciliter la tÃ¢che les applications web comme Github peuvent disposer dâ€™une API ouverte (Interface de Programmation). Nous allons donc nous documenter Ã  propos de celle-ci.</p>\n<p>Github dispose de plusieurs types dâ€™API Ã  savoir : une API REST et une API GraphQL; ces apis ont une approche diffÃ©rente de la donnÃ©e distante, pour faciliter la tÃ¢che nous allons utiliser lâ€™api REST qui sert de standard Ã  la plupart des APIs modernes.</p>\n<p>La documentation nous indique la baseUrl <a href=\"https://api.github.com/\"><code>https://api.github.com</code></a> câ€™est par cette url que toutes les requests vers lâ€™api seront envoyÃ©es. Lâ€™application qui va rÃ©pondre Ã  nos requÃªtes a Ã©tÃ© dÃ©veloppÃ©e selon des normes dâ€™accessibilitÃ©, il vous sera donc plus simple de tester des endpoints (les endpoints sont un ou plusieurs objets dâ€™une collection de donnÃ©es), lorsque votre requÃªte sera erronÃ© lâ€™api rÃ©pondra une erreur avec un code de statuts, câ€™est le protocole HTTP qui permet les rÃ©ponses avec statuts. Les donnÃ©es dont nous avons besoin sont donc facilement accessibles (nous verrons plus tard les cas dâ€™authentification).</p>\n<h2>2. CrÃ©ations de lâ€™application</h2>\n<p>Lâ€™utilisateur de lâ€™application doit pouvoir donner un ou plusieurs mots clÃ©s pour permettre Ã  lâ€™application de rechercher lâ€™emoji en question.</p>\n<p>Pour dÃ©buter une application NodeJS, nous avons besoin du gestionnaire de package npm, npm va rendre utilisable notre application. Pour utiliser npm vous aurez besoin de NodeJS ğŸ¤ª, si npm nâ€™est pas installÃ© vous pouvez <a href=\"http://nodejs.org/downloads\">mettre Ã  jour</a> NodeJS ou lâ€™installer avec apt si vous Ãªtes sur linux <code>sudo apt install npm</code></p>\n<p>Maintenant que NodeJS et NPM sont bien installÃ©s nous allons crÃ©er un package avec la commande :</p>\n<pre><code>npm init\n\npackage name: my-app\nversion: (1.0.0)\ndescription:\nentry point: (cli.js)\ntest command:\ngit repository:\nkeywords:\nauthor:\nlicense: (ISC)\n</code></pre>\n<p>A lâ€™aide de la lib yargs nous allons rÃ©cupÃ©rer les arguments Ã©mis par lâ€™utilisateur. Pour lâ€™installer il vous suffit de taper dans votre terminal :</p>\n<pre><code>npm i yargs\n</code></pre>\n<p>Maintenant Ã©ditons le cÅ“ur de notre application, crÃ©ez le fichier <strong>cli.js</strong>. Nous allons intÃ©grer <strong>yargs</strong> que nous venons dâ€™installer.</p>\n<pre><code>const argv = require(&quot;yargs&quot;)\n</code></pre>\n<p><strong>Yargs</strong> permet de dÃ©finir des options Ã  lâ€™application, son utilisation est trÃ¨s simple, il suffit dâ€™ajouter mÃ©thode Ã  la fonction require â¤µï¸</p>\n<pre><code>const argv = require(&quot;yargs&quot;)\n    .usage(&quot;Usage: $0 -e [eg. alien]&quot;)  // Ici nous dÃ©finissons l'usage de la commande pour l'utilisateur\n    .alias(&quot;e&quot;, &quot;emoji&quot;) // Ici nous mettons en relation deux options qui auront le mÃªme effet\n    .describe(&quot;e&quot;, &quot;Get an emoji&quot;) // Ici nous dÃ©crivons l'option &quot;e&quot; pour l'utilisateur\n    .help(&quot;h&quot;) // Help est une mÃ©thode native Ã  la librarie, cela affiche une explication de l'utilisation de l'app\n    .alias(&quot;h&quot;, &quot;help&quot;) // Encore un alias\n    .epilog(&quot;MattÃ¨o Gauthier - semoule.fr 2019&quot;).argv // Puis un texte Ã  afficher en fin d'exÃ©cution de la commande help\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// On remarque aussi la mÃ©thode .argv qui termine\n</code></pre>\n<p>Nous pouvons dÃ¨s Ã  prÃ©sent tester le fonctionnement en ajoutant un console.log</p>\n<pre><code>...\nconsole.log(argv.e)\n</code></pre>\n<p>Normalement si tout fonctionne Ã  lâ€™exÃ©cution la sortie devrait ressembler Ã  Ã§a :</p>\n<pre><code>$ node cli.js -e hey\nhey\n\n$ node cli.js\nundefined\n</code></pre>\n<hr>\n<p>Maintenant que <strong>yargs</strong> est fonctionnelle passons Ã  la rÃ©cupÃ©ration des donnÃ©es de lâ€™api Github, nous allons effectuer une requÃªte HTTP, pour cela nous allons utilisÃ© la librairie <strong>axios</strong> (il existe de nombreuses librairies http nodejs mais axios reste la plus connues, got est aussi une trÃ¨s bonne librairie)</p>\n<pre><code>npm i axios\n</code></pre>\n<p>Maintenant que nous avons les librairies requises â¤µï¸</p>\n<pre><code>// DÃ©finition des modules requis\nconst argv = require(&quot;yargs&quot;)\n    .usage(&quot;Usage: $0 -e [eg. alien]&quot;)\n    .alias(&quot;e&quot;, &quot;emoji&quot;)\n    .describe(&quot;e&quot;, &quot;Get an emoji&quot;)\n    .help(&quot;h&quot;)\n    .alias(&quot;h&quot;, &quot;help&quot;)\n    .epilog(&quot;MattÃ¨o Gauthier - semoule.fr 2019&quot;).argv\nconst axios = require(&quot;axios&quot;)\n\nconst choice = argv.e // DÃ©finition de la variable qui intÃ©gre le choix de l'use\nconsole.log(&quot;You chose &quot; + choice + &quot; emoji&quot;) // Message de rappel du choix (debug)\n\naxios.get(`https://api.github.com/emojis`) // RequÃªte GET Ã  l'aide de la fonction axios.get()\n  .then((response) =&gt; { // Lorsque la promise est rÃ©solu (rÃ©ponse de l'api)\n    let res = response.data // Assignation de la variable\n    console.log(res[choice]); // Affichage de l'url de l'emoji demandÃ©\n  })\n</code></pre>\n<p>VoilÃ  le fonctionnement de notre mini application, vous pouvez bien Ã©videmment lâ€™amÃ©liorer pour quâ€™elle puisse par exemple enregistrer dans lâ€™image dans un dossier ou que lâ€™emoji en question soit copiÃ© dans le presse papier.</p>\n<p>Application en fonctionnement â¤µï¸</p>\n<pre><code>$ node cli.js -e smile\nYou chose smile emoji\nhttps://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8\n</code></pre>\n<p>Câ€™est bien beau tout cela mais notre application ne dispose pas de commande Ã  portÃ©e gÃ©nÃ©rale, il serait plus pratique dâ€™utiliser une commande telle que :</p>\n<pre><code>touch index.html // Commande Unix qui crÃ©er un ou plusieurs fichier\n</code></pre>\n<p>Pour lier notre application Ã  un alias utilisable globalement nous avons dâ€™abord besoin de configurer le fichier <code>package.json</code> â¤µï¸</p>\n<pre><code>{\n  &quot;name&quot;: &quot;emoji-app&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;Hello WORLD&quot;,\n  &quot;main&quot;: &quot;cli.js&quot;, // Ici le main doit correspondre avec le bin â¤µï¸\n  &quot;bin&quot;: {\n    &quot;emoji-app&quot;: &quot;cli.js&quot; // Ici on dÃ©fini l'exÃ©cutable\n  },\n  &quot;scripts&quot;: {\n    &quot;start&quot;: &quot;node cli.js&quot;\n  },\n  &quot;engines&quot;: {\n    &quot;node&quot;: &quot;&gt;=8&quot; // Ici on s'assure que l'utilisateur Ã  une version suffisante (facultatif)\n  },\n  &quot;files&quot;: [\n    &quot;cli.js&quot; // Ici on ajoute les fichiers requis Ã  l'exÃ©cution\n  ],\n  &quot;keywords&quot;: [],\n  &quot;author&quot;: &quot;MattÃ¨o Gauthier&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;dependencies&quot;: {\n    &quot;axios&quot;: &quot;^0.19.0&quot;,\n    &quot;yargs&quot;: &quot;^13.3.0&quot;\n  }\n}\n</code></pre>\n<p>Puis le fichier <code>cli.js</code></p>\n<pre><code>#!/usr/bin/env node // On ajoute un shebang pour que le systÃ¨me exÃ©cute avec node\n</code></pre>\n<p><strong>Maintenant votre application est disponible dans votre terminal avec la commande <code>emoji-app</code> !</strong></p>\n<blockquote>\n<p>Merci dâ€™avoir lu ce bref tutoriel nâ€™hÃ©sitez pas Ã  partager vos programmes et Ã  me donner votre avis sur ce post</p>\n</blockquote>\n"}],error:null,state:{bloglist:[{title:"CrÃ©ation du bot discord Giselle",published:e,description:"Petite prÃ©sentation d'un bot discord simple, crÃ©er avec Discord.js",tags:"discord,bot,discord.js,api,discord-bot",ctime:"2019-06-09",author:t,slug:"Creation-du-bot-discord-Giselle"},{title:"Marketing, entrepreneuriat bookmarks",published:e,description:"Petite listes de ressources en rapport avec l'entrepreunariat",tags:"marketing,entrepreneuriat,seo,OSS,bookmarks,list,books,business,communication",ctime:"2019-10-07",author:t,landingImg:"josh-calabrese-Ca8r0PSWg9Q-unsplash.jpg",slug:"Marketing-entrepreneuriat-bookmarks"},{title:"Stage TBWA\\Paris",published:e,description:"RÃ©sumÃ© jour par jour de mon stage dans l'entreprise\\TBWA",tags:"stage,paris,tbwa,Boulogne",ctime:"2019-07-14",author:t,landingImg:"tbwa-landing.jpg",slug:"Stage-TBWA-Paris"},{title:"Review : ScreenToGif",published:e,description:"DÃ©couvre comment Ã©diter et crÃ©er des gifs animÃ©s simplement avec le logiciel open-source ScreenToGif",tags:"screentogif,gif,open-source,OSS,Review",ctime:"2019-05-12",author:t,slug:"review-screen-to-gif"},{title:o,published:e,description:n,tags:i,ctime:"2019-07-31",author:t,filename:s,slug:"tuto-app-cli-nodejs"}],posts:{}},serverRendered:e}}(!0,"MattÃ¨o Gauthier","Tuto - CrÃ©ation d'une application CLI avec NodeJS","Simple approche des applications cli avec nodejs","node,nodejs,cli,app,yargs","tuto-app-cli-nodejs.md")</script><script src="/mattaio-website/_nuxt/0a8bdd07b09a027a2b22.js" defer></script><script src="/mattaio-website/_nuxt/22dc228677282aed575d.js" defer></script><script src="/mattaio-website/_nuxt/79b6ae31d4a6badc9636.js" defer></script><script src="/mattaio-website/_nuxt/0ffaf7a34307cf057f4f.js" defer></script><script src="/mattaio-website/_nuxt/08a7e0d52047aed56052.js" defer></script>
  </body>
</html>
